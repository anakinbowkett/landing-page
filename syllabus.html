<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCSE Maths Mastery - Lectures</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #ffffff;
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: transparent;
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            position: fixed;
            height: calc(100vh - 40px);
            overflow-y: auto;
            margin: 20px;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 2.5rem;
            letter-spacing: -0.02em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 0.875rem;
            padding: 0.875rem 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9375rem;
            font-weight: 500;
            color: #374151;
            text-decoration: none;
        }

        .nav-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .nav-item.active {
            background: #ffffff;
            color: #111827;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .nav-icon {
            font-size: 1.125rem;
        }

        .nav-spacer {
            flex: 1;
        }

        .live-study-btn {
            background: #000000;
            color: white;
            padding: 0.875rem 1.25rem;
            border-radius: 8px;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            width: 100%;
            margin-top: auto;
        }

        .live-study-btn:hover {
            background: #1a1a1a;
            transform: translateY(-1px);
        }

        .main-content {
            flex: 1;
            margin-left: 320px;
            margin-right: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
            background: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #e0e4e9;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
        }

       .content-wrapper {
            background: #97b6e5;
            padding: 8rem 0 0 0;
        }

        .subject-header {
            display: flex;
            align-items: center;
            margin-bottom: 4rem;
            position: relative;
        }

        .subject-line-left {
            height: 1px;
            background: #d1d5db;
            flex: 0 0 60px;
        }

        .subject-name {
            font-size: 2.5rem;
            font-weight: 600;
            color: #111827;
            padding: 0 2rem;
            letter-spacing: -0.03em;
        }

        .subject-line-right {
            height: 1px;
            background: #d1d5db;
            flex: 1;
        }

        .topics-section {
            background: transparent;
            padding: 0 3rem 2.5rem 3rem;
        }
      
      .topics-container {
            padding: 2rem;
            background: transparent;
        }

        
    

        .unit-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }

        /* Accordion Styles */
        .accordion-item {
            border-bottom: 1px solid #e8e8e8;
            overflow: visible;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-header {
            padding: 24px 0;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            width: 100%;
            min-height: 70px;
            background: transparent;
            border: none;
        }

        .accordion-header:hover {
            color: #666;
        }

        .accordion-header h3 {
            font-size: 18px;
            font-weight: 600;
            letter-spacing: -0.01em;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            font-family: 'Inter', sans-serif;
        }

        .accordion-icon {
            width: 24px;
            height: 24px;
            transition: transform 0.3s ease;
            flex-shrink: 0;
        }

        .accordion-icon.rotated {
            transform: rotate(180deg);
        }

        .accordion-body {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease, padding 0.4s ease;
            padding: 0;
        }

        .accordion-body.open {
            max-height: 2000px;
            padding-bottom: 0;
        }

        .accordion-content {
            padding: 0;
            background: #f8f9fa;
        }
      
      /* ===== SUBTOPIC STYLES - ADD HERE ===== */
.subtopic-item {
    padding: 16px 20px;
    background: white;
    border-radius: 8px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border: 1px solid #e8e8e8;
}

.subtopic-item:hover {
    background: #fafafa;
    border-color: #d4d4d4;
    transform: translateX(4px);
}

.subtopic-item:last-child {
    margin-bottom: 0;
}

.subtopic-name {
    font-size: 15px;
    font-weight: 500;
    color: #1a1a1a;
    font-family: 'Crimson Text', serif;
}
 
.subtopic-progress {
    display: flex;
    align-items: center;
    gap: 12px;
}

.progress-indicator {
    display: flex;
    gap: 6px;
}

.progress-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #e5e5e5;
    transition: all 0.3s ease;
}

.progress-dot.complete {
    background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
}

.progress-dot.partial {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
}

.progress-text {
    font-size: 13px;
    color: #6b7280;
    font-weight: 500;
    min-width: 45px;
}

.arrow-icon {
    font-size: 20px;
    color: #9ca3af;
    transition: transform 0.2s ease;
}

.subtopic-item:hover .arrow-icon {
    transform: translateX(4px);
    color: #4f46e5;
}
/* ===== END SUBTOPIC STYLES ===== */

        .accordion-body p {
            font-size: 15px;
            line-height: 1.7;
            color: #444;
            margin-bottom: 20px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            flex-wrap: nowrap;
        }

        .accordion-quiz-section {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 20px;
            width: 100%;
            flex-wrap: nowrap;
        }

        .accordion-quiz-left {
            flex-shrink: 0;
        }

        .accordion-divider {
            width: 1px;
            height: 40px;
            background: #e5e5e5;
            flex-shrink: 0;
        }

        .accordion-quiz-right {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .accordion-progress-label {
            font-size: 11px;
            color: #6b7280;
            font-weight: 500;
        }

        .accordion-progress-bar {
            width: 100%;
            height: 6px;
            background-color: #e5e5e7;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
        }

        .accordion-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
            transition: width 0.4s ease;
        }

        .accordion-progress-text {
            font-size: 12px;
            color: #444;
            font-weight: 500;
        }

        .action-btn {
            background: #000000;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-family: 'Inter', sans-serif;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            max-width: 120px;
        }

        .action-btn:hover {
            background: #2a2a2a;
            transform: translateY(-1px);
        }

        .action-btn:active {
            transform: translateY(0);
        }

      
     /* Topic Cards */
.topics-grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 40px;
    width: 100%;
    max-width: 900px;
}

.topic-card {
    background: white;
    border: 1px solid #d4d4d4;
    border-radius: 12px;
    padding: 0;
    transition: all 0.2s ease;
    cursor: pointer;
    position: relative;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    box-sizing: border-box;
    display: flex;
    align-items: stretch;
    min-height: 80px;
    overflow: hidden;
}

.topic-card:hover {
    border-color: #a0a0a0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.topic-card-left {
    flex: 1;
    padding: 24px 28px;
    display: flex;
    align-items: center;
}

.topic-title {
    font-size: 26px;
    font-weight: 600;
    color: #000000;
    letter-spacing: -0.02em;
    line-height: 1.3;
    display: flex;
    align-items: baseline;
    gap: 12px;
    word-wrap: break-word;
    overflow-wrap: break-word;
}

.topic-number {
    font-size: 26px;
    font-weight: 600;
    color: #999;
    letter-spacing: -0.02em;
}

.topic-card-divider {
    width: 1px;
    background: #e5e5e5;
    align-self: stretch;
}

.topic-card-right {
    width: 280px;
    padding: 24px 32px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 12px;
    background: url('https://i.postimg.cc/CMq3Z90y/Maths.png') center/cover no-repeat;
    position: relative;
}


.topic-progress-bar {
    width: 100%;
    height: 8px;
    background-color: #e5e5e7;
    border-radius: 10px;
    overflow: hidden;
    display: flex;
}

.topic-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
    transition: width 0.4s ease;
    border-radius: 10px;
} 

.topic-progress-text {
    font-size: 13px;
    color: #000000;
    font-weight: 600;
    background: #ffffff;
    padding: 4px 10px;
    border-radius: 6px;
    align-self: flex-start;
}

/* Expanded card overlay */
.expanded-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1000;
    display: none;
    pointer-events: none;
    background: rgba(0, 0, 0, 0);
    transition: background 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

.expanded-overlay.active {
    display: block;
    pointer-events: all;
    background: rgba(0, 0, 0, 0.65);
}

.expanded-card {
    position: fixed;
    background: white;
    border: 1px solid #d4d4d4;
    border-radius: 12px;
    box-shadow: 0 30px 80px rgba(0, 0, 0, 0.35);
    z-index: 1001;
    opacity: 0;
    transform: scale(0.92) translateZ(0);
    transition: all 0.65s cubic-bezier(0.19, 1, 0.22, 1);
    overflow: hidden;
    max-height: 85vh;
    overflow-y: auto;
    box-sizing: border-box;
    will-change: transform, opacity, left, top, width;
}

.expanded-card.animating {
    opacity: 1;
    transform: scale(1) translateZ(0);
}

.expanded-card-header {
    padding: 40px;
    border-bottom: 1px solid #e8e8e8;
    position: sticky;
    top: 0;
    background: white;
    z-index: 10;
}

.close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    width: 32px;
    height: 32px;
    border: none;
    background: #f5f5f5;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    font-size: 20px;
    color: #666;
}

.close-btn:hover {
    background: #e8e8e8;
    color: #000;
}

.expanded-title {
    font-size: 36px;
    font-weight: 600;
    color: #000000;
    letter-spacing: -0.02em;
    line-height: 1.3;
    display: flex;
    align-items: baseline;
    gap: 16px;
}

.expanded-number {
    font-size: 36px;
    font-weight: 600;
    color: #999;
    letter-spacing: -0.02em;
}
      
      
      
        @media (max-width: 768px) {
            .accordion-header h3 {
                font-size: 16px;
                white-space: normal;
                line-height: 1.4;
            }

            .accordion-quiz-section {
                flex-direction: column;
                align-items: stretch;
                gap: 16px;
            }

            .accordion-divider {
                display: none;
            }

            .accordion-quiz-right {
                width: 100%;
            }

            .button-group {
                width: 100%;
            }

            .action-btn {
                max-width: none;
                flex: 1;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 240px;
                margin: 15px;
                height: calc(100vh - 30px);
            }

            .main-content {
            flex: 1;
            margin-left: 320px;
            margin-right: 20px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
            .subject-name {
                font-size: 2rem;
                padding: 0 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <aside class="sidebar">
        <div class="logo">GCSE Maths Mastery</div>
        
        <a href="dashboard.html" class="nav-item">
            <span class="nav-icon">üè†</span>
            <span>Dashboard</span>
        </a>

        <a href="lectures.html" class="nav-item active">
            <span class="nav-icon">‚àû</span>
            <span>Lectures</span>
        </a>

        <a href="flashtiles.html" class="nav-item">
            <span class="nav-icon">‚ö°</span>
            <span>Flashtiles</span>
        </a>

        <a href="quick-test.html" class="nav-item">
            <span class="nav-icon">üïê</span>
            <span>Quiz / Quick Test</span>
        </a>

        <a href="past-papers.html" class="nav-item">
            <span class="nav-icon">üìÑ</span>
            <span>Past Papers</span>
        </a>

        <div class="nav-spacer"></div>

        <button class="live-study-btn">Allow Live Study</button>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-wrapper">
            <div class="subject-header">
                <div class="subject-line-left"></div>
                <h1 class="subject-name">Mathematics</h1>
                <div class="subject-line-right"></div>
            </div>
        </div>

      <section class="topics-section">
    <div class="topics-grid">
        <div class="topic-card" data-topic="1" data-title="Number">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">1</span>
                    <span>Number</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">
         
                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="1"></div>
                </div>
                <div class="topic-progress-text">0/31 complete</div>
            </div>
        </div>

        <div class="topic-card" data-topic="2" data-title="Algebra">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">2</span>
                    <span>Algebra</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">
     
                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="2"></div>
                </div>
                <div class="topic-progress-text">0/16 complete</div>
            </div>
        </div>

        <div class="topic-card" data-topic="3" data-title="Ratio and Proportion">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">3</span>
                    <span>Ratio and Proportion</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">

                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="3"></div>
                </div>
                <div class="topic-progress-text">0/11 complete</div>
            </div>
        </div>

        <div class="topic-card" data-topic="4" data-title="Geometry and Measures">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">4</span>
                    <span>Geometry and Measures</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">
   
                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="4"></div>
                </div>
                <div class="topic-progress-text">0/16 complete</div>
            </div>
        </div>

        <div class="topic-card" data-topic="5" data-title="Trigonometry">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">5</span>
                    <span>Trigonometry</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">

                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="5"></div>
                </div>
                <div class="topic-progress-text">0/3 complete</div>
            </div>
        </div>

        <div class="topic-card" data-topic="6" data-title="Probability and Statistics">
            <div class="topic-card-left">
                <div class="topic-title">
                    <span class="topic-number">6</span>
                    <span>Probability and Statistics</span>
                </div>
            </div>
            <div class="topic-card-divider"></div>
            <div class="topic-card-right">
       
                <div class="topic-progress-bar">
                    <div class="topic-progress-fill" style="width: 0%" data-topic-progress="6"></div>
                </div>
                <div class="topic-progress-text">0/18 complete</div>
            </div>
        </div>
    </div>
</section>

<div class="expanded-overlay" id="expandedOverlay"></div>

        </div>
            </div>

        </section>
    </main>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Topic data structure with subtopics
    const topicData = {
        1: { 
            title: "Number", 
            sections: [
                { 
                    number: "1.1", 
                    title: "Types of Number", 
                    content: "Master the different types of numbers and their properties.",
                    subtopics: [
                        { name: "1.1.1 Product of prime factors", progress: { complete: 2, partial: 1, total: 4 }, score: "12/32" },
                        { name: "1.1.2 Highest common factor", progress: { complete: 3, partial: 0, total: 4 }, score: "15/32" },
                        { name: "1.1.3 Lowest common multiple", progress: { complete: 4, partial: 0, total: 4 }, score: "25/32" },
                        { name: "1.1.4 Standard form", progress: { complete: 1, partial: 0, total: 4 }, score: "9/32" }
                    ]
                },
                { 
                    number: "1.2", 
                    title: "Fractions and Decimals", 
                    content: "Master operations with fractions and decimal conversions.",
                    subtopics: [
                        { name: "1.2.1 Multiplying fractions", progress: { complete: 0, partial: 0, total: 4 }, score: "0/32" },
                        { name: "1.2.2 Dividing fractions", progress: { complete: 3, partial: 0, total: 4 }, score: "15/32" },
                        { name: "1.2.3 Converting fractions to decimals", progress: { complete: 1, partial: 1, total: 4 }, score: "5/32" }
                    ]
                },
                { 
                    number: "1.3", 
                    title: "Percentages", 
                    content: "Master percentage calculations and applications.",
                    subtopics: [
                        { name: "1.3.1 Percentage of amount", progress: { complete: 3, partial: 1, total: 4 }, score: "22/32" },
                        { name: "1.3.2 Reverse percentages", progress: { complete: 0, partial: 0, total: 4 }, score: "0/32" },
                        { name: "1.3.3 Compound interest", progress: { complete: 3, partial: 0, total: 4 }, score: "15/32" }
                    ]
                }
            ]
        },
        2: { 
            title: "Algebra", 
            sections: [
                { number: "2.1", title: "Index Laws", content: "Master the laws of indices and how to manipulate powers." },
                { number: "2.2", title: "Expression vs Equation", content: "Understand the difference between algebraic expressions and equations." },
                { number: "2.3", title: "Factorising Expressions", content: "Learn to factorise algebraic expressions effectively." }
            ]
        },
        3: { 
            title: "Ratio and Proportion", 
            sections: [
                { number: "3.1", title: "Simplifying Ratios", content: "Learn to simplify ratios to their simplest form." },
                { number: "3.2", title: "Sharing in a Ratio", content: "Share quantities in given ratios." }
            ]
        },
        4: { 
            title: "Geometry and Measures", 
            sections: [
                { number: "4.1", title: "Angle Facts", content: "Learn fundamental angle properties and relationships." },
                { number: "4.2", title: "Angles on Lines", content: "Master angles on straight lines and around points." }
            ]
        },
        5: { 
            title: "Trigonometry", 
            sections: [
                { number: "5.1", title: "Pythagoras' Theorem", content: "Apply Pythagoras' theorem to find missing sides in right-angled triangles." },
                { number: "5.2", title: "SOH CAH TOA", content: "Use sine, cosine, and tangent to find missing sides and angles." }
            ]
        },
        6: { 
            title: "Probability and Statistics", 
            sections: [
                { number: "6.1", title: "Types of Data", content: "Identify and classify different types of data." },
                { number: "6.2", title: "Calculating Simple Probability", content: "Calculate theoretical probabilities for simple events." }
            ]
        }
    };

    const overlay = document.getElementById('expandedOverlay');

    // Topic card click handlers
    document.querySelectorAll('.topic-card').forEach(card => {
        card.addEventListener('click', function() {
            const topicNum = this.dataset.topic;
            const topicTitle = this.dataset.title;
            const rect = this.getBoundingClientRect();
            createExpandedCard(topicNum, topicTitle, rect);
        });
    });

    // Create expanded card modal
    function createExpandedCard(topicNum, topicTitle, rect) {
        const expandedCard = document.createElement('div');
        expandedCard.className = 'expanded-card';
        expandedCard.dataset.topicNumber = topicNum;
        expandedCard.style.left = rect.left + 'px';
        expandedCard.style.top = rect.top + 'px';
        expandedCard.style.width = rect.width + 'px';
        expandedCard.style.height = rect.height + 'px';

        const data = topicData[topicNum];
        let accordionHTML = '';

        data.sections.forEach((section, index) => {
            const titleWithNumber = section.number ? `${section.number} ${section.title}` : section.title;
            
            // Generate subtopics HTML if they exist
            let contentHTML = '';
            if (section.subtopics && section.subtopics.length > 0) {
                section.subtopics.forEach(subtopic => {
                    const dots = [];
                    for (let i = 0; i < subtopic.progress.total; i++) {
                        if (i < subtopic.progress.complete) {
                            dots.push('<div class="progress-dot complete"></div>');
                        } else if (i === subtopic.progress.complete && subtopic.progress.partial > 0) {
                            dots.push('<div class="progress-dot partial"></div>');
                        } else {
                            dots.push('<div class="progress-dot"></div>');
                        }
                    }
                    
                    contentHTML += `
                        <div class="subtopic-item">
                            <span class="subtopic-name">${subtopic.name}</span>
                            <div class="subtopic-progress">
                                <div class="progress-indicator">
                                    ${dots.join('')}
                                </div>
                                <span class="progress-text">${subtopic.score}</span>
                                <span class="arrow-icon">‚Ä∫</span>
                            </div>
                        </div>
                    `;
                });
            } else {
                // For sections without subtopics, show simple content
                contentHTML = `<p style="padding: 20px; color: #444;">${section.content}</p>`;
            }

            accordionHTML += `
                <div class="accordion-item">
                    <div class="accordion-header" data-index="${index}">
                        <h3>${titleWithNumber}</h3>
                        <svg class="accordion-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="accordion-body">
                        <div class="accordion-content">
                            ${contentHTML}
                        </div>
                    </div>
                </div>
            `;
        });

        expandedCard.innerHTML = `
            <div class="expanded-card-header">
                <button class="close-btn">√ó</button>
                <div class="expanded-title">
                    <span class="expanded-number">${topicNum}</span>
                    <span>${topicTitle}</span>
                </div>
            </div>
            <div class="accordion-content">${accordionHTML}</div>
        `;

        overlay.appendChild(expandedCard);
        overlay.classList.add('active');

        setTimeout(() => {
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const targetWidth = Math.min(800, viewportWidth - 40);

            expandedCard.style.left = (viewportWidth - targetWidth) / 2 + 'px';
            expandedCard.style.top = Math.max(60, (viewportHeight * 0.08)) + 'px';
            expandedCard.style.width = targetWidth + 'px';
            expandedCard.style.height = 'auto';
            expandedCard.classList.add('animating');

            // Open first accordion by default
            setTimeout(() => {
                const firstAccordion = expandedCard.querySelector('.accordion-header');
                const firstBody = expandedCard.querySelector('.accordion-body');
                const firstIcon = expandedCard.querySelector('.accordion-icon');
                if (firstAccordion && firstBody && firstIcon) {
                    firstBody.classList.add('open');
                    firstIcon.classList.add('rotated');
                }
            }, 450);
        }, 50);

        // Close button handler
        expandedCard.querySelector('.close-btn').addEventListener('click', () => {
            expandedCard.classList.remove('animating');
            overlay.classList.remove('active');
            setTimeout(() => expandedCard.remove(), 400);
        });

        // Accordion functionality
        expandedCard.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', function() {
                const body = this.nextElementSibling;
                const icon = this.querySelector('.accordion-icon');
                body.classList.toggle('open');
                icon.classList.toggle('rotated');
            });
        });

        // Subtopic click handlers
        expandedCard.querySelectorAll('.subtopic-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.stopPropagation();
                console.log('Navigating to subtopic:', this.querySelector('.subtopic-name').textContent);
                // Add your navigation logic here
            });
        });
    }

    // Close modal when clicking overlay
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            const card = overlay.querySelector('.expanded-card');
            if (card) {
                card.classList.remove('animating');
                overlay.classList.remove('active');
                setTimeout(() => card.remove(), 400);
            }
        }
    });
});
</script>
</body>
</html>
